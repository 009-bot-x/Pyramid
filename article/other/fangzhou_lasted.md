今天的 **华为有技术·EMUI媒体沙龙** 中，华为消费者BG软件部总裁王成录博士和大家分享了华为黑科技背后的故事，其中透露了关于方舟编译器的更多细节。作为一名 Android 开发，我也一直关注着方舟的最新动态。在方舟发布的第一时间，我也写了一篇相关的文章 [说说方舟编译器](https://juejin.im/post/5cb07000f265da037d4f9be6)，对方舟和 Android Art 运行机制还不是很了解的可以移步这篇文章。

下面是媒体沙龙会上关于方舟编译器的相关介绍，来自于微博 [华为EMUI](https://weibo.com/hwemui?refer_flag=1001030103_)。下面就一睹为快吧！

![](https://user-gold-cdn.xitu.io/2019/4/25/16a542a68acaead9?w=1265&h=712&f=jpeg&s=100773)

> 编译器是连接人类世界与机器世界之间的一座桥梁，同时也扮演着“翻译者”的角色。它将程序员使用的高级语言翻译成机器能明白的机器码，从而使得手机能够听懂并执行人类的指令。现有的安卓系统主要是在手机上进行编译，往往有部分程序需要一边转换一边执行，影响程序执行的效率。那么如何突破这个瓶颈呢？请往下看~

![](https://user-gold-cdn.xitu.io/2019/4/25/16a542ab143c84e9?w=1265&h=712&f=jpeg&s=92815)
![](https://user-gold-cdn.xitu.io/2019/4/25/16a542b0a678ee17?w=1265&h=712&f=jpeg&s=65757)

> 【十年磨砺，终得硕果】编译器优化对程序运行性能及用户体验有显著影响，它的开发，从系统软件到应用软件，需要投入大量的时间和精力进行研发，这一板块在国内尚属“无人区”。华为已经在研发编译器的路上积累了多年，早至2009年华为就创建了编译组，到2013年推出自研编译器HCC，对于华为在移动通信领域领先起到了关键作用，这背后是华为人前赴后继的努力和无数次尝试，终于，在2019年方舟编译器正式与大家见面。

![](https://user-gold-cdn.xitu.io/2019/4/25/16a542b69a1456a2?w=1265&h=712&f=jpeg&s=107556)

> 方舟编译器，安卓性能革命突破】当前大部分安卓应用都涉及不同开发语言，不同语言形成的代码需要在运行态中进行协同从而产生额外消耗。而方舟编译器是业界首个多语言联合优化的编译器，开发者在开发环境中可以一次性将多语言统一编译为一套机器码，运行时无需产生跨语言带来的额外消耗，并可以进行跨语言的联合优化，提升运行效率。

![](https://user-gold-cdn.xitu.io/2019/4/25/16a542b9e227bedb?w=1265&h=712&f=jpeg&s=109837)

> 安卓自身的编译技术在不断的发展，但始终需要在运行中依赖虚拟机来进行动态编译和解释执行，对系统资源消耗较大。而方舟编译器在开发环境中就可以完成全部代码的编译，手机安装应用程序后无需依赖虚拟机资源，即可全速运行程序，带来效率上的极大提升。举一个例子：EMUI 9.1仅仅对系统组件System Server应用了华为方舟编译器后，就带来了系统操作流畅度提升24%，系统响应性能提升44%的收益。

![](https://user-gold-cdn.xitu.io/2019/4/25/16a542bf41dfce8d?w=1265&h=712&f=jpeg&s=125272)

> 【方舟编译器，高效的回收机制】内存管理是程序开发与运行时需要重点考虑的部分，也和系统流畅度息息相关。安卓在内存回收上采用集中回收机制，发声全局回收时更需要暂停应用，这也是随机卡顿的根因之一。而方舟编译器提供了更高效的内存回收机制，回收时无需暂停应用，随时用随时回收，大大提高运行速度。

![](https://user-gold-cdn.xitu.io/2019/4/25/16a542c2c7001478?w=1265&h=712&f=jpeg&s=84823)
![](https://user-gold-cdn.xitu.io/2019/4/25/16a542c604ea15ef?w=1265&h=712&f=jpeg&s=99865)

> 【方舟编译器，应用级编译优化】代码优化是编译器最为核心的功能，也是评判一个编译器优劣最重要的标准。当前由于安卓应用使用了虚拟机机制，难以面向不同应用对虚拟机进行针对性的灵活优化。安卓ART的AoT和JIT动态编译因为是运行在手机上，受资源所限，因而只能使用简单的优化算法。而方舟编译器由于是在应用开发阶段进行编译，所以可以允许不同应用灵活采用不同的编译优化方案，而且因为在开发环境编译不会受到手机性能的限制，可以使用更多先进的优化算法，从而使得每个应用的性能达到最佳。

![](https://user-gold-cdn.xitu.io/2019/4/25/16a542c8ef18d3b4?w=1265&h=712&f=jpeg&s=59651)
![](https://user-gold-cdn.xitu.io/2019/4/25/16a542cca1c9a738?w=1265&h=712&f=jpeg&s=72636)

> 【简单易用，开放开源】华为在持续进行技术创新的同时，也注重将技术成果回馈行业，华为方舟编译器在开发构建的阶段为开发者提供快速的集成编译环境，大大降低了开发者的学习成本和使用成本，令产业与更多用户受益。华为方舟编译器会从2019年开始全面开源，邀请整个产业和生态来一起共同关注和提升安卓性能体验。

![](https://user-gold-cdn.xitu.io/2019/4/25/16a542ce280e6ded?w=1265&h=712&f=jpeg&s=99333)

> 继华为P30系列发布会方舟编译器开源后，将在2019年8月的华为终端开发者大会宣布方舟编译框架代码开源，后续会在2019年11月的绿盟开发者大会实现完整方舟编译器代码开源。

华为十年前就开始布局编译器，其在基础研发的高持续投入，的确是其他厂商所不及的。随着华为完整闭环的形成。哪有有一天失去了谷歌，失去了安卓，相信华为也能搭建出自己的一套生态环境。

后续会持续关注方舟编译器，不妨点个关注吧！

> 文章首发微信公众号： **`秉心说`** ， 专注 Java 、 Android 原创知识分享，LeetCode 题解，欢迎关注！

![](https://user-gold-cdn.xitu.io/2019/3/30/169cf046d9579e78?w=258&h=258&f=jpeg&s=27711)
